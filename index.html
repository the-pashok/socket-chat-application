<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Chat application</title>
    <meta name="description" content="Node.js chat application">
    <meta name="author" content="Paul Tseluiko">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
<!--    <link rel="stylesheet" href="css/style.css">-->
    <style>
        #messages {
            padding-top: 30px;
        }
        .message-item {
            background-color: #17a2b8;
            color: black;
            font-weight: 500;
            padding: 7px 14px;
            border-radius: 5px;
            margin-bottom: 12px;
        }
    </style>
</head>
<body>

<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h1 class="display-4">Welcome to chat application</h1>
    <p class="lead">Enter your name and start messaging!</p>
</div>

<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-6">
            <h2 class="display-5">Form</h2>
            <form id="messForm" method="get" onsubmit="sendMess(event)">
                <div class="form-group">
                    <label for="exampleFormControlTextarea1">Message</label>
                    <textarea name="message" class="form-control" id="exampleFormControlTextarea1" rows="6"></textarea>
                </div>
                <button type="submit" class="btn btn-danger">Send</button>
            </form>
        </div>
        <div class="col-sm-12 col-md-6">
            <h2 class="display-5">Messages</h2>
            <div id="messages"></div>
        </div>
    </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect('http://localhost:3000');
    var form = document.getElementById('messForm');
    var textarea = document.getElementById('exampleFormControlTextarea1');
    var messages = document.getElementById('messages');

    function sendMess(event) {
        event.preventDefault();
        socket.emit('sendMessage', textarea.value);
        textarea.value = '';
    }

    socket.on('addMessage', data => {
        messages.innerHTML += '<div class="message-item">' + data.msg + '</div>'
    });
</script>
</body>
</html>